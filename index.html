<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ASDF-V</title>
    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css"/>
    <link rel="stylesheet" type="text/css" href="css/asdf.css"/>
    <link rel="icon" href="img/chevron-double-right.svg">
</head>

<body>
    <nav class="navbar bg-light navbar-expand-md navbar-expand-lg navbar-expand-xl navbar-expand-xxl rounded fixed-top ps-2 pe-2 pt-1" data-bs-theme="light">
    <div class="container-fluid justify-content-start" id="toolbar">

        <ul class="navbar-nav col-lg-7 col-xl-6 col-xxl-5 justify-content-start align-items-center">
        <a class="navbar-brand pt-0 pb-0" id="navbarBrand" href="" onclick="asdfVM.navbarBrandOnClick()">ASDF-V &rang;&rang;</a>

        <div>
            <label class="btn btn-sm btn-light btn-asdf multiline dense me-3" for="fileInput" id="fileInputLabel">open</label>
            <input class="form-control form-control-sm" id="fileInput" type="file" style="display: none;" accept=".asdf"
             onchange="asdfVM.fileInputOnChange(event)" onclick="asdfVM.fileInputOnClick()">
        </div>

        <div>
            <div class="btn-group" role="group">
                <!--
                <input type="checkbox" class="btn-check" id="showTimeToggle">
                <label class="btn btn-sm btn-light" for="showTimeToggle">t</label>

                <input type="checkbox" class="btn-check" id="showIdsToggle">
                <label class="btn btn-sm btn-light" for="showIdsToggle">id</label>
                -->

                <input type="checkbox" class="btn-check" id="showInstanceToggle">
                <label class="btn btn-sm btn-light btn-asdf dense" for="showInstanceToggle"
                       data-bs-toggle="tooltip"
                       data-bs-custom-class="custom-tooltip"
                       data-bs-placement="bottom"
                       data-bs-title="Highlight signals of the same instance based on their source instance IDs">instance</label>

                <input type="checkbox" class="btn-check" id="showRelatedToggle">
                <label class="btn btn-sm btn-light btn-asdf dense" for="showRelatedToggle"
                       data-bs-toggle="tooltip"
                       data-bs-custom-class="custom-tooltip"
                       data-bs-placement="bottom"
                       data-bs-title="Highlight related signals based on their source and destination instance IDs">related</label>
            </div>

            <button type="button" class="btn btn-light btn-sm btn-asdf dense" onclick="asdfVM.resetToolbarOnClick()">reset</button>
            <button class="btn btn-sm btn-light btn-asdf dense" type="button" data-bs-toggle="offcanvas" data-bs-target="#helpOffcanvas" aria-controls="offcanvasRight">help</button>
        </div>
        </ul>

        <ul class="navbar-nav col-lg-2 col-xl-2 col-xxl-2 justify-content-xxl-center justify-content-xl-start">
        <nav>
            <ul class="pagination bs-secondary mt-0 mb-0 pt-0 pb-0 me-3 align-items-start" id="paginator" style="visibility: hidden;">
                <li class="page-item"><a class="page-link" id="pageFirst" onclick="asdfVM.paginatorPageFirst()">&lang;&lang;</a></li>
                <li class="page-item"><a class="page-link" id="pagePrev" onclick="asdfVM.paginatorPagePrev()">&lang;</a></li>
                <li class="page-item disabled"><a class="page-link" id="pageInfo"></a></li>
                <li class="page-item"><a class="page-link" id="pageNext" onclick="asdfVM.paginatorPageNext()">&rang;</a></li>
                <li class="page-item"><a class="page-link" id="pageLast" onclick="asdfVM.paginatorPageLast()">&rang;&rang;</a></li>
            </ul>
        </nav>
        </ul>

        <ul class="navbar-nav col-lg-3 col-xl-4 col-xxl-5 justify-content-end align-items-center">
        <div id="diagramSearchContainer" class="container-fluid">
            <div id="diagramSearch" style="visibility: hidden;">
                <div class="input-group input-group-sm justify-content-end">
                    <span class="input-group-text">/</span>
                    <input type="text" class="form-control" id="diagramSearchInput" style="max-width: 300px; width: auto;">
                    <span id="searchStats" class="info ms-1 me-0"></span>
                </div>
            </div>
        </div><!--diagramSearchContainer-->
        </ul>

    </div><!--toolbar-->
    </nav>

    <div class="content">
        <div id="diagramArea">
            <div id="diagramHeadContainer" class="container-fluid">
                <div id="diagramHead"></div>
            </div>
            <div id="diagramContainer">

                <div id="diagram" class="container-fluid">
                    <div class="row">
                    <div class="col-md-12 col-lg-8 col-xl-4">

    <p style="text-align: justify;">
    ASDF-V is an interactive vector graphics tool for visualizing
    sequence diagrams in the Augmented Sequence Diagram Format (ASDF).
    Select an ASDF file to view and interact with it.
    </p>

    <p style="text-align: justify;">
    All operations are performed locally within the browser. Data
    remains on the device, with no information transferred to or stored
    on any server.  For further assurance, the repository can be cloned
    or downloaded from GitHub, and index.html opened locally.
    </p>

    <p style="text-align: right;"><small>
    &copy; 2024-2025 Tamás Dezső (<a href="http://asdf.hu">asdf.hu</a>)<br><a href="https://github.com/xsnpdngv/ASDF-V">github.com/xsnpdngv/ASDF-V</a></small>
    </p><br>

    <h6>Release Notes - v1.2 (Januray 12, 2025)</h6>
    <ul>
    <li>Support even very big asdf files</li>
    <li>Show event timestamps</li>
    <li>Introduce Vim-like keyboard navigation</li>
    <li>Implement signal search, also inspired by Vim</li>
    <li>Add help page with keyboard shortcut reference</li>
    <li>Simplify and restyle user interface</li>
    </ul>

    <h6>Release Notes - v1.1 (December 12, 2024)</h6>
    <ul>
    <li>Paginate large diagrams</li>
    <li>Show diagram/display summary</li>
    <li>Add syntax definition</li>
    </ul>

    <h6>Release Notes - v1.0 (December 10, 2024)</h6>
    <ul>
    <li>Parse and visualize ASDF input</li>
    <li>View/peek additional signal information on click/hover</li>
    <li>Hide, unhide and reorder participants as preferred</li>
    <li>Fliter signals by hiding participants</li>
    <li>Highlight clicked signal and relations by coloring when needed</li>
    <li>Show/hide instance identifiers on signal arrows</li>
    <li>Emphasize special signals by coloring</li>
    <li>Keep participant order and visibliity over reloads, if reasonable</li>
    <li>Preserve toolbar settings in browser over page reloads</li>
    <li>Assign sequence numbers to signals</li>
    <li>Align window heights for diagram and additional info</li>
    <li>Render big diagrams in chunks</li>
    <li>Show floating participants header</li>
    <li>Preserve/adapt scroll positions</li>
    </ul>

    <h6>Feature Requests</h6>
    <ul>
    <li>Filter signals by time (interval) and additional info content</li>
    <li>Show signal list view on demand</li>
    <li>Resolve signal relations beyond neighbours</li>
    <li>Fold indentation blocks in additional info</li>
    <li>Render additional info header</li>
    </ul>

                    </div>
                    <div class="col text-center">
                        <figure>
                            <figcaption>ASDF Syntax</figcaption>
                            <img src="img/asdf-rr.svg">
                        </figure>

                        <figure>
                            <figcaption>add-info</figcaption>
                            <img src="img/asdf-add-info-rr.svg">
                        </figure>

                        <figure>
                            <figcaption>name-value</figcaption>
                            <img src="img/asdf-name-value-rr.svg">
                        </figure>

                    </div>
                    </div><!--row-->


                </div><!--diagram-->
            </div><!--diagramContainer-->
        </div><!--diagramArea-->
        <div id="divider"><!----------------------------------------------------------></div>
        <div id="addinfoDisplay">
            <pre class="addinfoSection" id="notation"></pre>
            <pre class="addinfoSection" id="meta"></pre>
            <pre class="addinfoSection" id="addinfo"></pre>
        </div>
    </div><!--content-->

    <div class="offcanvas offcanvas-end" tabindex="-1" id="helpOffcanvas" aria-labelledby="offcanvasRightLabel">
        <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="offcanvasRightLabel">Keyboard Shortcuts</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>
        <div class="offcanvas-body">
            <div class="shortcut-list">
                <div class="shortcut-item"><span class="shortcut-key">? </span>show this help</div>
                <div class="shortcut-item"><span class="shortcut-key">j </span>cursor down</div>
                <div class="shortcut-item"><span class="shortcut-key">k </span>cursor up</div>
                <div class="shortcut-item"><span class="shortcut-key">J </span>scroll-locked cursor down</div>
                <div class="shortcut-item"><span class="shortcut-key">K </span>scroll-locked cursor up</div>
                <div class="shortcut-item"><span class="shortcut-key">&lt; </span>previous page</div>
                <div class="shortcut-item"><span class="shortcut-key">&gt; </span>next page</div>
                <div class="shortcut-item"><span class="shortcut-key">h </span>previous page</div>
                <div class="shortcut-item"><span class="shortcut-key">l </span>next page</div>
                <div class="shortcut-item"><span class="shortcut-key">H </span>first page</div>
                <div class="shortcut-item"><span class="shortcut-key">L </span>last page</div>
                <div class="shortcut-item"><span class="shortcut-key">zz</span>center cursor</div>
                <div class="shortcut-item"><span class="shortcut-key">gg</span>first signal on page</div>
                <div class="shortcut-item"><span class="shortcut-key">G </span>last signal on page</div>
                <div class="shortcut-item"><span class="shortcut-key">/ </span>focus search pattern input</div>
                <div class="shortcut-item"><span class="shortcut-key">n </span>next match</div>
                <div class="shortcut-item"><span class="shortcut-key">N </span>previous match</div>
                <div class="shortcut-item"><span class="shortcut-key">* </span>next occurence of current signal</div>
                <div class="shortcut-item"><span class="shortcut-key"># </span>previous occurence of current signal</div>
                <div class="shortcut-item"><span class="shortcut-key">T </span>toggle timestamps</div>
                <div class="shortcut-item"><span class="shortcut-key">I </span>toggle highlighting same instance signals</div>
                <div class="shortcut-item"><span class="shortcut-key">R </span>toggle highlighting related signals</div>
                <div class="shortcut-item"><span class="shortcut-key">== </span>move divider to top</div>
                <div class="shortcut-item"><span class="shortcut-key">-= </span>move divider to center</div>
                <div class="shortcut-item"><span class="shortcut-key">-- </span>move divider to bottom</div>
                <div class="shortcut-item"><span class="shortcut-key">-d </span>move divider to default position</div>
                <div class="shortcut-item"><span class="shortcut-key">re </span>reset visualization to default</div>
            </div>
        </div>
    </div><!--offcanvas-->

    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap.js"></script>
    <script src="js/underscore.js"></script>
    <script src="js/raphael.js"></script>
    <script src="js/sequence-diagram.js"></script>
    <script src="js/asdf.js"></script>
</body>
</html>
